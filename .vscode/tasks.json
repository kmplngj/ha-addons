{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Start Home Assistant",
      "type": "shell",
      "command": "supervisor_run",
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Build Pixoo REST Add-on",
      "type": "shell",
      "command": "docker",
      "args": [
        "build",
        "-t",
        "local/pixoo-rest",
        "--build-arg",
        "BUILD_FROM=ghcr.io/home-assistant/amd64-base-python:3.12-alpine3.20",
        "--build-arg",
        "BUILD_ARCH=amd64",
        "--build-arg",
        "BUILD_VERSION=dev",
        "./pixoo-rest"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Validate Add-on Config",
      "type": "shell",
      "command": "python3",
      "args": [
        "-c",
        "import yaml; yaml.safe_load(open('pixoo-rest/config.yaml')); print('âœ“ config.yaml is valid')"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Lint Dockerfile",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "-i",
        "hadolint/hadolint",
        "<",
        "pixoo-rest/Dockerfile"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Check Shell Scripts",
      "type": "shell",
      "command": "shellcheck",
      "args": [
        "pixoo-rest/run.sh"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Format YAML Files",
      "type": "shell",
      "command": "prettier",
      "args": [
        "--write",
        "**/*.yaml"
      ],
      "group": "build",
      "presentation": {
        "reveal": "silent",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Run All Tests",
      "dependsOn": [
        "Validate Add-on Config",
        "Lint Dockerfile",
        "Check Shell Scripts"
      ],
      "dependsOrder": "parallel",
      "group": {
        "kind": "test"
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    }
  ]
}
